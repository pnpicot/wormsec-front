<div class="device-details-container">
  @if (selectedDevice) {
    <div class="details-content">
      <!-- ✅ TITRE ENLEVÉ -->

      <div class="device-info-card">
        <div class="device-header">
          <i class="fas {{ getOSIcon(selectedDevice.os) }} device-icon"></i>
          <div class="device-identity">
            <span class="device-name">{{ selectedDevice.name }}</span>
            @if (selectedDevice.ip) {
              <span class="device-ip">({{ selectedDevice.ip }})</span>
            }
          </div>
        </div>
        
        <app-status-indicator [status]="selectedDevice.status" />

        <div class="action-buttons">
          <button class="btn btn-primary" (click)="onIsolate()">
            <i class="fas fa-shield-halved"></i>
            Isolate
          </button>
          <button class="btn btn-primary" (click)="onRestore()">
            <i class="fas fa-rotate-left"></i>
            Restore
          </button>
          <button class="btn btn-primary" (click)="onForceScan()">
            <i class="fas fa-magnifying-glass"></i>
            Force scan
          </button>
          <button class="btn btn-primary" (click)="onUpdatePlugins()">
            <i class="fas fa-plug"></i>
            Update plugins
          </button>
        </div>
      </div>

      @if (getConnectedDevices().length > 0) {
        <div class="links-section">
          <span class="section-title">Links</span>
          <div class="links-card">
            <ul class="link-list">
              @for (device of getConnectedDevices(); track device.id) {
                <li class="link-item" (click)="onLinkClick(device)">
                  <i class="fas fa-network-wired link-icon"></i>
                  <div class="link-content">
                    <span class="link-name">{{ device.name }}</span>
                    <span class="link-ip">{{ device.ip }}</span>
                  </div>
                  <app-status-indicator [status]="device.status" />
                </li>
              }
            </ul>
          </div>
        </div>
      }

      @if (selectedDevice.events && selectedDevice.events.length > 0) {
        <div class="events-section">
          <span class="section-title">Events</span>
          <div class="events-card">
            <ul class="event-list">
              @for (event of selectedDevice.events; track event.id) {
                <li class="event-item">
                  <i class="fas {{ event.icon }} event-icon color-{{ event.iconColor }}"></i>
                  <div class="event-content">
                    <span class="event-title">{{ event.title }}</span>
                    <span class="event-timestamp">{{ event.timestamp }}</span>
                  </div>
                </li>
              }
            </ul>
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="no-selection">
      <i class="fas fa-laptop-code empty-icon"></i>
      <p class="empty-text">Select a device to view details</p>
    </div>
  }
</div>